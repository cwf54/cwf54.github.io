---
layout: post
title: "Lab 2"
subtitle: "Bluetooth Configuration with personal laptop"
date: 2023-02-07 23:45:13 -0400
background: '/img/posts/05.jpg'
---

<h2 class="section-heading">Pre-Lab</h2>
<p>The set up requires running a python script on a computer and an Arduino sketch on the Arduino. To run the Python scripts, we are using a virtual environment software called Jupyter Lab. When bluetooth is configured, the Python program running on my computer can send and receive messages to an from the Artemis. </p>
<p>There was some struggle with getting this set up to work, especially because it was believed that a Python program running on Windows 11 would not be able to Bluetooth connect with the Artemis. I initially set everything up on the lab computer, along with many other people in my lab section. We found however that there were still problems, as everyone's boards seemed to be connecting to everyone else's computers. Many people could not get through even the demo code provided in the Codebase.</p>
<p>However, thanks to the wonderful TAs and collaborative efforts on Ed Discussion, a solution to setting up Jupyter Lab on Windows 11 was found using Windows Subsystem for Linux (WSL). </p>
<p>We were given a Codebase for this lab which provided both a Python and an Arduino demo. Before sending any commands or messages to each other, the devices must establish a connection. This is done with  the Artemis's MAC address and a common UUID. </p>
<p>Upon running the given Arduino program, the device's MAC address is printed in the Serial Monitor. We can then input this MAC address to the Python script so that the program knows which MAC address to search for.</p>
<p>command from python to arduino</p>
<p></p>
<p></p>


<h2 class="section-heading">Configurations</h2>
<!-- artemis mac address screenshot -->
<img class="img-fluid" src="cwf54.github.io\img\lab2pics\MACaddress.jpg" alt="..." /> 

<p>The first step was finding the Artemis's MAC address. Upon running the given Arduino program, the device's MAC address is printed in the Serial Monitor. This MAC address is then stored in connections.yaml on the Python side so that my laptop will know which device to search for.</p>
<p>I then generated a new UUID and stored it in both the Python and Arduino Programs</p>
<!-- UUID generation, lines of code -->


<h2 class="section-heading">Going through demp.ipynb</h2>
<p>With the Configuration set up, I went through the provided Python demo program to verify that the connection was working before trying to change or write any new code.</p>
<!-- get through demo -->

<div style="position:relative;width:fit-content;height:fit-content;">
    <a style="position:absolute;top:20px;right:1rem;opacity:0.8;" href="https://clipchamp.com/watch/hAOn2LtmSaQ?utm_source=embed&utm_medium=embed&utm_campaign=watch">
        <img style="height:22px;" src="https://clipchamp.com/e.svg" alt="Made with Clipchamp" />
    </a>
    <iframe allow="autoplay;" allowfullscreen style="border:none" src="https://clipchamp.com/watch/hAOn2LtmSaQ/embed" width="640" height="360"></iframe>
</div>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>

<h2 class="section-heading">ECHO command</h2>
<p>After successfully getting through the demo, it was time to implement my own commands starting with an echo command. The Python program sends this command along with a string, and the Arduino should Echo the string back. Here is my code for how the Arduino handles an ECHO command:</p>
<script src="https://gist.github.com/cwf54/a533eddb375c1170d08fb403db529db5.js"></script>
<p>To verify, here is what the response looks like in the the Serial Monitor and Jupyter Lab.</p>
<img class="img-fluid" src="cwf54.github.io\img\lab2pics\ECHOcommand.jpg" alt="..." /> 



<h2 class="section-heading">Get Time Command</h2>
<p>To implement a command that returns a time stamp, I use an Arduino function called millis() which returns the number of milliseconds that have passed since the Arduino last restarted. </p>
<script src="https://gist.github.com/cwf54/e5e1a8d9ce5264b996b739cb4b1a7ac8.js"></script>
<img class="img-fluid" src="img\lab2pics\TIMEcommand.jpg" alt="..." width="527" height="428"/> 
<p></p>
<p></p>

<h2 class="section-heading">Notification Handler</h2>

<h2 class="section-heading">Get Temperature Command</h2>
<h2 class="section-heading">Limitations</h2>



<!-- <blockquote class="blockquote">The dreams of yesterday are the hopes of today and the reality of tomorrow. Science has not yet mastered prophecy. We predict too much for the next year and yet far too little for the next ten.</blockquote> -->

<p></p>

<h2 class="section-heading">Get Time Command</h2>

<p></p>

<!-- <img class="img-fluid" src="https://source.unsplash.com/Mn9Fa_wQH-M/800x450" alt="Demo Image">
<span class="caption text-muted">To go places and do things that have never been done before – that’s what living is all about.</span> -->

<p></p>
<p></p>

<p>Placeholder text by <a href="http://spaceipsum.com/">Space Ipsum</a>. Photographs by <a href="https://unsplash.com/">Unsplash</a>.</p>
